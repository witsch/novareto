<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="bghw.seminare">
<body>
    <div metal:fill-slot="main">
        <tal:main-macro metal:define-macro="main"
                        tal:define="testview view/test;
                        formdata view/getViewData;
                        marker formdata/marker;
                        seminare formdata/seminare;
                        plzform formdata/plzform;
                        ">

          <script type="text/javascript">

            jq(document).ready(function() {
                if (jq('input[name=voraussetzungen]').length != 0){
                    if (jq('input[name=voraussetzungen]').attr('checked') == true){
                    jq('span.linact').hide();}
                    else {
                    jq('a.lact').hide();}
                    }

                jq('input[name=voraussetzungen]').click(function() {
                  jq('span.linact').toggle();
                  jq('a.lact').toggle();
                  });
                jq('span.linact').click(function() {
                  alert('Bitte bestätigen Sie die Erfüllung der dargestellten Voraussetzungen');
                  });
             })

          </script>


          <h1 tal:content="context/title"/>

          <div style="float: right">
          <table class="grid listing" width="200px">
            <tr><th>Ansprechpartner</th><td tal:content="context/contactName"/></tr>
            <tr><th>E-Mail</th><td><a href="" tal:attributes="href string:mailto:${context/contactEmail}" 
                  tal:content="context/contactEmail">E-Mail</a></td></tr>
            <tr><th>Telefon</th><td tal:content="context/contactPhone"/></tr>
            <tr tal:condition="context/contactFax"><th>Telefax</th><td tal:content="context/contactFax"/></tr>
          </table>
          </div>

          <p class="description" tal:content="context/description"/>  

          <p class="haupttext" tal:content="structure context/text"/>

          <span tal:condition="context/prerequisites">
          <fieldset>
            <legend>Bitte beachten Sie folgende Teilnahmevoraussetzungen.</legend>
            <p class="voraussetzungen" tal:content="structure context/prerequisites"/>
          </fieldset>  
          </span>

          <span tal:condition="plzform">
            <p>Bitte geben Sie hier die Postleitzahl Ihres Unternehmens ein, um passende Seminartermine zu finden.</p>
            <p>  
            <form action="" tal:attributes="action python:context.absolute_url()+'/seminar_view'">
            <input name="plz" type="text" size="5" maxlength="5" value="" tal:attributes="value request/plz|nothing">
            <input type="submit" value="Seminare suchen" class="standalone">
          </form></p> 
          </span>
           
          <span tal:condition="python: not seminare and plzform and request.get('plz', '')">
            <p>Zu der von Ihnen angegebenen Postleitzahl konnten keine Seminartermine gefunden werden. Bitte prüfen Sie
               Ihre Eingabe.</p>
             </span>     

          <div tal:condition="seminare">
            <h2>Seminartermine</h2>
            <span tal:condition="context/prerequisites">  
              <label for="voraussetzungen">Erfüllung der Voraussetzungen<span class="required">*</span></label>
                <p><input type="checkbox" name="voraussetzungen"/>
                Bitte bestätigen Sie durch Anklicken, dass Sie die dargestellten Voraussetzungen 
                für die Teilnahme am Seminar erfüllen.</p>
              </span>    

          <table id="seminartermine" class="grid listing">
            <tr>
              <th>Seminarbeginn</th>
              <th>Seminarende</th>
              <th>Seminarort</th>
              <th tal:condition="marker">Folgetermin(e)</th>
              <th>Buchung</th>
            </tr>
            <tr tal:repeat="seminar seminare">
              <td tal:content="seminar/von"/>
              <td tal:content="seminar/bis"/>  
              <td tal:content="seminar/sort"/>
              <td tal:condition="marker"><span tal:condition="seminar/folge1" tal:content="seminar/folge1"/>
                  <span tal:condition="seminar/folge2"><br/><span tal:content="seminar/folge2"/></span></td>
              <td tal:condition="not: seminar/oldflag">
                <span tal:condition="not: seminar/ausgebucht">    
                <a href="" class="lact" tal:condition="not: seminar/ausgebucht" tal:attributes="href seminar/url">anmelden</a>
                <span tal:condition="context/prerequisites" class="linact" style="color:#666666;" >anmelden</span>
                </span>
                <span tal:condition="seminar/ausgebucht">
                  <a href="" class="lact" tal:condition="seminar/ausgebucht" tal:attributes="href seminar/url">ausgebucht<br/>
                    bitte vormerken</a>
                  <span tal:condition="context/prerequisites" class="linact" style="color:#666666;">ausgebucht<br/>
                    bitte vormerken</span>
                </span>
              </td>
              <td tal:condition="seminar/oldflag">
                abgeschlossen
              </td>  
            </tr>   
          </table>
        </div>

        </tal:main-macro>
    </div>
</body>
</html>
